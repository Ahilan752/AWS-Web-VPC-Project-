<!DOCTYPE html>
<html>
<head>
  <title>Form App</title>
</head>
<body>

<h2>User Form</h2>

<input id="name" placeholder="Name"><br><br>
<input id="email" placeholder="Email"><br><br>
<button onclick="submitForm()">Submit</button>

<h3>Saved Users</h3>
<ul id="users"></ul>

<script>
const BACKEND_URL = "http://18.215.180.170:3000"; // Your EC2_PUBLIC_IP  

function submitForm() {
  fetch(`${BACKEND_URL}/api/submit`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      name: document.getElementById("name").value,
      email: document.getElementById("email").value
    })
  })
  .then(res => res.text())
  .then(msg => {
    alert(msg);
    loadUsers();
  });
}

function loadUsers() {
  fetch(`${BACKEND_URL}/api/users`)
    .then(res => res.json())
    .then(data => {
      const ul = document.getElementById("users");
      ul.innerHTML = "";
      data.forEach(u => {
        ul.innerHTML += `<li>${u.name} - ${u.email}</li>`;
      });
    });
}

loadUsers();
</script>

</body>
</html>

</html>
